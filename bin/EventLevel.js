"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class EventLevel {
    constructor() {
        this.receivers = [];
        this.children = new Map();
    }
    addReceiver(levelNameArray, receiver) {
        if (levelNameArray.length === 0)
            this.receivers.push(receiver);
        else {
            var currentName = levelNameArray.shift();
            if (!this.children.has(currentName))
                this.children.set(currentName, new EventLevel());
            this.children.get(currentName).addReceiver(levelNameArray, receiver);
        }
    }
    removeReceiver(levelNameArray) {
        if (levelNameArray.length === 0) {
            this.receivers = [];
            this.children.clear();
        }
        else {
            var currentName = levelNameArray.shift();
            if (this.children.has(currentName))
                this.children.get(currentName).removeReceiver(levelNameArray);
        }
    }
    trigger(levelNameArray, data, _this, __originalLevelName) {
        if (__originalLevelName === undefined)
            __originalLevelName = Array.from(levelNameArray);
        if (levelNameArray.length === 0) {
            this.receivers.forEach(function (item) {
                item.call(_this, data, __originalLevelName);
            });
            this.children.forEach(function (child) {
                child.trigger(levelNameArray, data, _this, __originalLevelName);
            });
        }
        else {
            var currentName = levelNameArray.shift();
            if (this.children.has(currentName))
                this.children.get(currentName).trigger(levelNameArray, data, _this, __originalLevelName);
        }
    }
    ;
}
exports.default = EventLevel;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV2ZW50TGV2ZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFTQTtJQUFBO1FBRUksY0FBUyxHQUFtQixFQUFFLENBQUM7UUFDL0IsYUFBUSxHQUFHLElBQUksR0FBRyxFQUFtQixDQUFDO0lBd0UxQyxDQUFDO0lBOURHLFdBQVcsQ0FBQyxjQUFxQixFQUFFLFFBQXNCO1FBQ3JELEVBQUUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxDQUFDO1lBQ0YsSUFBSSxXQUFXLEdBQUcsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3pDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxJQUFJLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFFckQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDLGNBQWMsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN6RSxDQUFDO0lBQ0wsQ0FBQztJQVNELGNBQWMsQ0FBQyxjQUFxQjtRQUVoQyxFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMxQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLFdBQVcsR0FBRyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFekMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUN0RSxDQUFDO0lBQ0wsQ0FBQztJQVlELE9BQU8sQ0FBQyxjQUFxQixFQUFFLElBQVMsRUFBRSxLQUFjLEVBQUUsbUJBQTJCO1FBRWpGLEVBQUUsQ0FBQyxDQUFDLG1CQUFtQixLQUFLLFNBQVMsQ0FBQztZQUNsQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRXJELEVBQUUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLElBQUk7Z0JBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ2hELENBQUMsQ0FBQyxDQUFDO1lBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxLQUFLO2dCQUNqQyxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLFdBQVcsR0FBRyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFekMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBQ2pHLENBQUM7SUFDTCxDQUFDO0lBQUEsQ0FBQztDQUNMO0FBM0VELDZCQTJFQyIsImZpbGUiOiJFdmVudExldmVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOaOpeaUtuWZqOexu+Wei1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgcmVjZWl2ZXJUeXBlID0gKGRhdGE/OiBhbnksIGV2ZW50TmFtZT86IGFueVtdKSA9PiBhbnk7XHJcblxyXG4vKipcclxuICog5LqL5Lu2562J57qn57G7XHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRMZXZlbCB7XHJcblxyXG4gICAgcmVjZWl2ZXJzOiByZWNlaXZlclR5cGVbXSA9IFtdOyAvL+W9k+WJjeWxgue6p+eahOaOpeaUtuWZqFxyXG4gICAgY2hpbGRyZW4gPSBuZXcgTWFwPGFueSwgRXZlbnRMZXZlbD4oKTsgICAvL+WtkOWxgue6p1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5o6l5pS25ZmoXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7YW55W119IGxldmVsTmFtZUFycmF5IOS6i+S7tuetiee6p+WQjeWtl+aVsOe7hFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVjZWl2ZXIg55uR5ZCs5ZmoXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBFdmVudExldmVsXHJcbiAgICAgKi9cclxuICAgIGFkZFJlY2VpdmVyKGxldmVsTmFtZUFycmF5OiBhbnlbXSwgcmVjZWl2ZXI6IHJlY2VpdmVyVHlwZSkgeyAgLy/mt7vliqDmlrDnmoTnm5HlkKzlmahcclxuICAgICAgICBpZiAobGV2ZWxOYW1lQXJyYXkubGVuZ3RoID09PSAwKSAgLy/mmK/kuI3mmK/mnIDlkI7kuIDnuqfkuoZcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChyZWNlaXZlcik7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50TmFtZSA9IGxldmVsTmFtZUFycmF5LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGlsZHJlbi5oYXMoY3VycmVudE5hbWUpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zZXQoY3VycmVudE5hbWUsIG5ldyBFdmVudExldmVsKCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5nZXQoY3VycmVudE5hbWUpLmFkZFJlY2VpdmVyKGxldmVsTmFtZUFycmF5LCByZWNlaXZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog56e76Zmk5oyH5a6a562J57qn55qE5LqL5Lu255uR5ZCs5ZmoXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7YW55W119IGxldmVsTmFtZUFycmF5IOetiee6p+WQjeWtl+aVsOe7hFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnRMZXZlbFxyXG4gICAgICovXHJcbiAgICByZW1vdmVSZWNlaXZlcihsZXZlbE5hbWVBcnJheTogYW55W10pIHtcclxuXHJcbiAgICAgICAgaWYgKGxldmVsTmFtZUFycmF5Lmxlbmd0aCA9PT0gMCkgeyAvL+aYr+S4jeaYr+acgOWQjuS4gOe6p+S6hlxyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVycyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmNsZWFyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lID0gbGV2ZWxOYW1lQXJyYXkuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmhhcyhjdXJyZW50TmFtZSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmdldChjdXJyZW50TmFtZSkucmVtb3ZlUmVjZWl2ZXIobGV2ZWxOYW1lQXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOinpuWPkeaJgOacieaMh+Wumue6p+WIq+S7peWPiuWtkOe6p+eahOebkeWQrOWZqFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBsZXZlbE5hbWVBcnJheSDnrYnnuqflkI3lrZfmlbDnu4RcclxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDopoHnu5nop6blj5HnmoTmlrnms5XkvKDpgJLnmoTmlbDmja5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBfdGhpcyDmjIflrprnm5HlkKzlmajnu5HlrprnmoR0aGlz5a+56LGhXHJcbiAgICAgKiBAcGFyYW0ge2V2ZW50bmFtZVtdfSBfX29yaWdpbmFsTGV2ZWxOYW1lIOWGhemDqOS9v+eUqOeahO+8jOS/neeVmeS4gOS4quWOn+Wni+eahGxldmVsTmFtZVxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnRMZXZlbFxyXG4gICAgICovXHJcbiAgICB0cmlnZ2VyKGxldmVsTmFtZUFycmF5OiBhbnlbXSwgZGF0YTogYW55LCBfdGhpcz86IE9iamVjdCwgX19vcmlnaW5hbExldmVsTmFtZT86IGFueVtdKSB7XHJcblxyXG4gICAgICAgIGlmIChfX29yaWdpbmFsTGV2ZWxOYW1lID09PSB1bmRlZmluZWQpICAvL+S/neeVmeS4gOS4quWOn+Wni+eahGxldmVsTmFtZVxyXG4gICAgICAgICAgICBfX29yaWdpbmFsTGV2ZWxOYW1lID0gQXJyYXkuZnJvbShsZXZlbE5hbWVBcnJheSk7XHJcblxyXG4gICAgICAgIGlmIChsZXZlbE5hbWVBcnJheS5sZW5ndGggPT09IDApIHsgIC8v5piv5LiN5piv5pyA5ZCO5LiA57qn5LqGLOmBjeWOhuW9k+WJjee6p+WIq+WSjOWtkOe6p1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNhbGwoX3RoaXMsIGRhdGEsIF9fb3JpZ2luYWxMZXZlbE5hbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLnRyaWdnZXIobGV2ZWxOYW1lQXJyYXksIGRhdGEsIF90aGlzLCBfX29yaWdpbmFsTGV2ZWxOYW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnROYW1lID0gbGV2ZWxOYW1lQXJyYXkuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmhhcyhjdXJyZW50TmFtZSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmdldChjdXJyZW50TmFtZSkudHJpZ2dlcihsZXZlbE5hbWVBcnJheSwgZGF0YSwgX3RoaXMsIF9fb3JpZ2luYWxMZXZlbE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iXX0=
